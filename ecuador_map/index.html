
<!DOCTYPE html>
<html lang="en">
  <head>
    <style type="text/css">
      html, body, #map {height: 100%; padding: 0; margin: 0;}
    </style>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <script src="https://mapzen.com/tangram/0.7/tangram.min.js"></script>

  </head>
  <body>
      <div id="map"></div>

    <script>

      $(document).ready(function(){

        // cartodb.createVis('map', 'viz.json', null, function(vis, layers) {
        cartodb.createVis('map', 'https://team.cartodb.com/u/nerikcarto/api/v2/viz/96055dda-060c-11e6-bc42-0ea31932ec1d/viz.json', null, function(vis, layers) {
          vis.on('load', function() {})

          //Add Tangram basemap layer
          var tangram = Tangram.leafletLayer({
               scene: 'scene.yaml',
              //scene: 'https://rawgit.com/tangrams/tangram-sandbox/gh-pages/styles/lego.yaml',
              attribution: ' &copy; OSM contributors | <a href="https://mapzen.com/" target="_blank">Mapzen</a>'
          });
          tangram.addTo(vis.getNativeMap());

          cartodb.$('#map').on('click', function() {
            console.log('rebuild');
            console.log(tangram.scene.config.layers['ocean-water'].draw.polygons.color)
            tangram.scene.config.layers['ocean-water'].draw.polygons.color = 'blue'
            tangram.scene.rebuildGeometry();
          })

          // console.log(tangram)
          // console.log(tangram.scene)
          // console.log(tangram.scene.updateConfig)
          //
          // tangram.scene.subscribe({
          //    load: function (args) {
          //      console.log('lala')
          //      console.log(tangram.scene.config['zinc-light-gray-colors'].areas[1]);
          //      tangram.scene.config['zinc-light-gray-colors'].areas[1] = '#f0f';
          //      tangram.scene.rebuildGeometry();
          //     //  tangram.scene.load(tangram.scene.config_path, false);
          //    }
          //  })
        });
      });




    </script>

  </body>
</html>
